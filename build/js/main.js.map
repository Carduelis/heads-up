{"version":3,"sources":["js/main.js"],"names":["localSave","key","json","localStorage","setItem","JSON","stringify","RegionSetter","parse","this","arguments","length","_","isArray","prototype","builder","regions","i","regionName","prefix","replaceElement","el","AcceleratorData","Backbone","Model","extend","defaults","x","y","alpha","z","beta","gamma","App","Marionette","Application","region","initialize","options","console","log","getRegion","model","rootView","app","on","e","history","start","DeviceMotionEvent","ondevicemotion","acceleration","dataset","gravity","accelerationIncludingGravity","rotationRate","window","AcceleratorDebug","View","_Marionette$View$exte","template","className","modelEvents","change","_defineProperty","triggerMethod","Date","getTime","lastRenderTime","getNow","delta","render","RootView","onRender","show","$","document","ready"],"mappings":"sIAAA,QAASA,WAAUC,EAAIC,GAEtB,MADAC,cAAaC,QAAQH,EAAKI,KAAKC,UAAUJ,KAClC,EAFR,QAASF,WAAUC,GAClBE,GAAAA,GAAAA,KAAaC,MAAQH,aAAUK,QAAUJ,GACzC,OAAOA,6BAGPK,aAAgBC,WAMhB,MALAC,MAAAC,UAAAA,UACA,GAAAD,KAAAC,UAAAC,QAAAC,EAAAC,QAAAJ,KAAAC,UAAA,MAKCD,KAAKC,UAAYA,UAAU,IAF5BD,KAAKC,OAAL,KACID,KAAKC,UAERH,cAAAO,UAAAC,QAAA,WACDC,UACA,KAAA,GAAOC,KAAKF,MAALL,UAAP,CAND,GAAAQ,GAAAT,KAAAC,UAAAO,EAQAV,SAAAA,IACCS,GAAAA,KAAUG,OAAVD,EACAE,gBAAc,GAGZC,MAAIL,SADiB,IAAtBM,iBAAAC,SAAAC,MAAAC,QAIAC,SAAA,WACD,OATDC,EAAA,EAWAC,EAAIN,EACHI,EAAAA,EACCG,MAAO,EACNF,KADM,EAENC,MAFM,EAGNE,SACAD,EAAAA,EACAE,EAAAA,EACAC,EAAAA,OACSC,IAAAC,WAAAC,YAAAV,QAPHW,OAAP,OAaAC,WAAA,SAAAC,GAfFC,QAAAC,IAAA,cAAAF,GAiBA7B,KAAIwB,MAAMC,GAAAA,kBAETG,QAAAA,WACCE,QAAQC,IAAI/B,KAAAgC,aACZhC,KAAKiC,SAAQ,GAAIpB,WAJqBoB,MAAAjC,KAAAiC,QAOtCH,KAAAA,YAAiBE,KAAAA,KAALE,YAIZC,KAAA,GAAKH,KACLG,IAAAC,GAAA,QAAA,SAAAC,GACAvB,SAAAwB,QAAAC,QAEF,mBAAUf,QAAVgB,oBACAL,OAAOM,eAAUJ,SAAMA,GACtBvB,GAAAA,GAAAX,EAAiBoC,UAAjBF,EAAAK,aAKEC,GAAQC,QAAUP,EAAEQ,6BAHlBR,EAAAS,cACHC,EAAAA,OAAON,EAAAA,EAAPK,cAECH,EAAAA,MAAQC,WACRT,IAAMW,MAAAA,IAAAA,IACL3C,SAMDgC,IAVDC,GAAA,eAAA,SAAAC,KAiBF,IAAIW,kBAAmBvB,WAAWwB,KAAKjC,QAAhBkC,uBAAvBC,SAAIH,uBACHG,UAAU,YACVC,WAAW,SAAAvB,GACXD,KAAAA,MAAYC,EAAAI,OAEXoB,aAEAC,OAAA,WAPqBC,gBAAAL,sBAAA,aAMT,WANSlD,KAAAwD,cAAA,qBAAAD,gBAAAL,sBAAA,SAAA,WAcrB,OAAO,GAAIO,OAAOC,YAdGH,gBAAAL,sBAAA,kBAiBhBS,WAjBgB3D,KAAA2D,eAAA3D,KAAA4D,WAAAL,gBAAAL,sBAAA,cAqBT,WACX,GAAAW,GAAA7D,KAAA4D,SAAA5D,KAAA2D,cACAE,GAAA,KAvBoB7D,KAAA8D,WAAAP,gBAAAL,sBAAA,iBA6BRzB,WACd0B,KAAAA,cADqC,qBA7BfD,wBAiCrBa,SAAalC,WAAQI,KAArBjB,QACAmC,SALoC,UAMrCa,QAAAA,GAAUlE,cAAA,UAAY,YAAA,UAAA,SAAA,SACrB8B,WAAKI,SAAUH,GACdI,KAAAA,MAAYA,EAAAA,OAEb+B,SAAA,WAVFhE,KAAAgC,UAAA,WAAAiC,KAAA,GAAAjB,mBAQGf,MAAOjC,KAAKiC,WAMfiC,GAAEC,UAAUC,MAAM,WACjBjC,IAAII","file":"main.js","sourcesContent":["function localSave(key,json) {\r\n\tlocalStorage.setItem(key, JSON.stringify(json));\r\n\treturn true;\r\n};\r\nfunction localRead(key) {\r\n\tvar json = JSON.parse(localStorage.getItem(key));\r\n\treturn json;\r\n};\r\n\r\nvar RegionSetter = function() {\r\n\tthis.arguments = arguments;\r\n\tif (this.arguments.length == 1 && _.isArray(this.arguments[0])) {\r\n\t\tthis.arguments = arguments[0]\r\n\t}\r\n\tthis.prefix = 'r-';\r\n\treturn this.builder();\r\n};\r\nRegionSetter.prototype.builder = function() {\r\n\tregions = {};\r\n\tfor (var i in this.arguments) {\r\n\t\tvar regionName = this.arguments[i]\r\n\t\tregions[regionName] = {\r\n\t\t\tel: this.prefix+regionName,\r\n\t\t\treplaceElement: true\r\n\t\t}\r\n\t}\r\n\treturn regions\r\n};\r\nvar AcceleratorData = Backbone.Model.extend({\r\n\tdefaults: function() {\r\n\t\treturn {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\t\t\talpha: 0,\r\n\t\t\tbeta: 0,\r\n\t\t\tgamma: 0,\r\n\t\t\tgravity: {\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0,\r\n\t\t\t\tz: 0,\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\nvar App = Marionette.Application.extend({\r\n\tregion: '#app',\r\n\tinitialize: function(options) {\r\n\t\tconsole.log('My options:', options);\r\n\t\tthis.model = new AcceleratorData();\r\n\t},\r\n\tonStart: function() {\r\n\t\tconsole.log(this.getRegion());\r\n\t\tthis.rootView = new RootView({\r\n\t\t\tmodel: this.model\r\n\t\t});\r\n\t\tthis.getRegion().show(this.rootView);\r\n\t\t// this.showView(new RootView()); // are the same\r\n\t},\r\n});\r\napp = new App();\r\napp.on('start', (e) => {\r\n\tBackbone.history.start();\r\n\r\n\tif (typeof window.DeviceMotionEvent !== 'undefined') {\r\n\t\twindow.ondevicemotion = function(e) {\r\n\t\t\tvar dataset = _.extend({},e.acceleration);\r\n\t\t\tdataset.gravity = e.accelerationIncludingGravity;\r\n\t\t\tif (e.rotationRate) {\r\n\t\t\t\t_.extend(dataset,e.rotationRate);\r\n\t\t\t};\r\n\t\t\t_.delay(()=>{\r\n \t\t\t\tapp.model.set(dataset);\r\n\t\t\t},100);\r\n\t\t\t\r\n\t\t}\r\n\t};\r\n});\r\napp.on('before:start', \t(e) => {\r\n\t\r\n});\r\n\r\nvar AcceleratorDebug = Marionette.View.extend({\r\n\ttemplate: '#t-accelerator-debug',\r\n\tclassName: 'acc-debug',\r\n\tinitialize: function(options) {\r\n\t\tthis.model = options.model;\r\n\t},\r\n\tmodelEvents: {\r\n\t\t// 'change': 'checkRender',\r\n\t\t'change': 'render'\r\n\t},\r\n\tinitialize: function() {\r\n\t\tthis.triggerMethod('set:render:time');\r\n\t},\r\n\tgetNow: function() {\r\n\t\treturn new Date().getTime()\r\n\t},\r\n\tonSetRenderTime: function() {\r\n\t\tthis.lastRenderTime = this.getNow();\r\n\t},\r\n\tcheckRender: function() {\r\n\t\tvar delta = this.getNow() - this.lastRenderTime;\r\n\t\tif (delta > 100) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\tonBeforeRender: function() {\r\n\t\tthis.triggerMethod('set:render:time')\r\n\t}\r\n})\r\nvar RootView = Marionette.View.extend({\r\n\ttemplate: '#t-root',\r\n\tregions: new RegionSetter('navibar','statusbar','content','result','timer'),\r\n\tinitialize: function(options) {\r\n\t\tthis.model = options.model;\r\n\t},\r\n\tonRender: function () {\r\n\t\tthis.getRegion('navibar').show(new AcceleratorDebug({\r\n\t\t\tmodel: this.model\r\n\t\t}));\r\n\t}\r\n});\r\n\r\n\r\n$(document).ready(function () {\r\n\tapp.start();\r\n\r\n});\r\n\r\n\r\n\r\n\r\n"]}