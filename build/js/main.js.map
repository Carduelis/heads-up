{"version":3,"sources":["js/main.js"],"names":["localSave","key","json","localStorage","setItem","JSON","stringify","localRead","parse","getItem","RegionSetter","this","arguments","length","_","isArray","prefix","builder","prototype","regions","i","regionName","el","replaceElement","AcceleratorData","Backbone","Model","extend","defaults","x","y","z","alpha","beta","gamma","gravity","App","Marionette","Application","region","initialize","options","console","log","model","onStart","getRegion","rootView","RootView","show","app","on","e","history","start","window","DeviceMotionEvent","ondevicemotion","dataset","acceleration","accelerationIncludingGravity","rotationRate","delay","set","AcceleratorDebug","View","template","className","modelEvents","change","triggerMethod","getNow","Date","getTime","onSetRenderTime","lastRenderTime","checkRender","delta","render","onBeforeRender","onRender","Navibar","$","document","ready"],"mappings":"AAAA,QAASA,WAAUC,EAAIC,GAEtB,MADAC,cAAaC,QAAQH,EAAKI,KAAKC,UAAUJ,KAClC,EAER,QAASK,WAAUN,GAClB,GAAIC,GAAOG,KAAKG,MAAML,aAAaM,QAAQR,GAC3C,OAAOC,GAGR,GAAIQ,cAAe,WAMlB,MALAC,MAAKC,UAAYA,UACY,GAAzBD,KAAKC,UAAUC,QAAeC,EAAEC,QAAQJ,KAAKC,UAAU,MAC1DD,KAAKC,UAAYA,UAAU,IAE5BD,KAAKK,OAAS,KACPL,KAAKM,UAEbP,cAAaQ,UAAUD,QAAU,WAChCE,UACA,KAAK,GAAIC,KAAKT,MAAKC,UAAW,CAC7B,GAAIS,GAAaV,KAAKC,UAAUQ,EAChCD,SAAQE,IACPC,GAAIX,KAAKK,OAAOK,EAChBE,gBAAgB,GAGlB,MAAOJ,SAER,IAAIK,iBAAkBC,SAASC,MAAMC,QACpCC,SAAU,WACT,OACCC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,KAAM,EACNC,MAAO,EACPC,SACCN,EAAG,EACHC,EAAG,EACHC,EAAG,OAKHK,IAAMC,WAAWC,YAAYX,QAChCY,OAAQ,OACRC,WAAY,SAASC,GACpBC,QAAQC,IAAI,cAAeF,GAC3B9B,KAAKiC,MAAQ,GAAIpB,kBAElBqB,QAAS,WACRH,QAAQC,IAAIhC,KAAKmC,aACjBnC,KAAKoC,SAAW,GAAIC,WACnBJ,MAAOjC,KAAKiC,QAEbjC,KAAKmC,YAAYG,KAAKtC,KAAKoC,YAG7BG,KAAM,GAAId,KACVc,IAAIC,GAAG,QAAS,SAACC,GAChB3B,SAAS4B,QAAQC,QAEuB,mBAA7BC,QAAOC,oBACjBD,OAAOE,eAAiB,SAASL,GAChC,GAAIM,GAAU5C,EAAEa,UAAUyB,EAAEO,aAC5BD,GAAQvB,QAAUiB,EAAEQ,6BAChBR,EAAES,cACL/C,EAAEa,OAAO+B,EAAQN,EAAES,cAEpB/C,EAAEgD,MAAM,WACNZ,IAAIN,MAAMmB,IAAIL,IACd,QAML,IAAIM,kBAAmB3B,WAAW4B,KAAKtC,QACtCuC,SAAU,uBACVC,UAAW,YACX3B,WAAY,SAASC,GACpB9B,KAAKiC,MAAQH,EAAQG,OAEtBwB,aAECC,OAAU,UAEX7B,WAAY,WACX7B,KAAK2D,cAAc,oBAEpBC,OAAQ,WACP,OAAO,GAAIC,OAAOC,WAEnBC,gBAAiB,WAChB/D,KAAKgE,eAAiBhE,KAAK4D,UAE5BK,YAAa,WACZ,GAAIC,GAAQlE,KAAK4D,SAAW5D,KAAKgE,cAC7BE,GAAQ,KACXlE,KAAKmE,UAGPC,eAAgB,WACfpE,KAAK2D,cAAc,sBAGjBtB,SAAWX,WAAW4B,KAAKtC,QAC9BuC,SAAU,UACVC,UAAW,OACXhD,QAAS,GAAIT,cAAa,UAAU,YAAY,UAAU,UAC1D8B,WAAY,SAASC,GACpB9B,KAAKiC,MAAQH,EAAQG,OAEtBoC,SAAU,WACTrE,KAAKmC,UAAU,aAAaG,KAAK,GAAIe,mBACpCpB,MAAOjC,KAAKiC,SAEbjC,KAAKmC,UAAU,WAAWG,KAAK,GAAIgC,SAAQhB,QAK7CiB,GAAEC,UAAUC,MAAM,WACjBlC,IAAII","file":"js/main.js","sourcesContent":["function localSave(key,json) {\r\n\tlocalStorage.setItem(key, JSON.stringify(json));\r\n\treturn true;\r\n};\r\nfunction localRead(key) {\r\n\tvar json = JSON.parse(localStorage.getItem(key));\r\n\treturn json;\r\n};\r\n\r\nvar RegionSetter = function() {\r\n\tthis.arguments = arguments;\r\n\tif (this.arguments.length == 1 && _.isArray(this.arguments[0])) {\r\n\t\tthis.arguments = arguments[0]\r\n\t}\r\n\tthis.prefix = 'r-';\r\n\treturn this.builder();\r\n};\r\nRegionSetter.prototype.builder = function() {\r\n\tregions = {};\r\n\tfor (var i in this.arguments) {\r\n\t\tvar regionName = this.arguments[i]\r\n\t\tregions[regionName] = {\r\n\t\t\tel: this.prefix+regionName,\r\n\t\t\treplaceElement: true\r\n\t\t}\r\n\t}\r\n\treturn regions\r\n};\r\nvar AcceleratorData = Backbone.Model.extend({\r\n\tdefaults: function() {\r\n\t\treturn {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tz: 0,\r\n\t\t\talpha: 0,\r\n\t\t\tbeta: 0,\r\n\t\t\tgamma: 0,\r\n\t\t\tgravity: {\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0,\r\n\t\t\t\tz: 0,\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\nvar App = Marionette.Application.extend({\r\n\tregion: '#app',\r\n\tinitialize: function(options) {\r\n\t\tconsole.log('My options:', options);\r\n\t\tthis.model = new AcceleratorData();\r\n\t},\r\n\tonStart: function() {\r\n\t\tconsole.log(this.getRegion());\r\n\t\tthis.rootView = new RootView({\r\n\t\t\tmodel: this.model\r\n\t\t});\r\n\t\tthis.getRegion().show(this.rootView);\r\n\t},\r\n});\r\napp = new App();\r\napp.on('start', (e) => {\r\n\tBackbone.history.start();\r\n\r\n\tif (typeof window.DeviceMotionEvent !== 'undefined') {\r\n\t\twindow.ondevicemotion = function(e) {\r\n\t\t\tvar dataset = _.extend({},e.acceleration);\r\n\t\t\tdataset.gravity = e.accelerationIncludingGravity;\r\n\t\t\tif (e.rotationRate) {\r\n\t\t\t\t_.extend(dataset,e.rotationRate);\r\n\t\t\t};\r\n\t\t\t_.delay(()=>{\r\n \t\t\t\tapp.model.set(dataset);\r\n\t\t\t},100);\r\n\t\t\t\r\n\t\t}\r\n\t};\r\n});\r\n\r\nvar AcceleratorDebug = Marionette.View.extend({\r\n\ttemplate: '#t-accelerator-debug',\r\n\tclassName: 'acc-debug',\r\n\tinitialize: function(options) {\r\n\t\tthis.model = options.model;\r\n\t},\r\n\tmodelEvents: {\r\n\t\t// 'change': 'checkRender',\r\n\t\t'change': 'render'\r\n\t},\r\n\tinitialize: function() {\r\n\t\tthis.triggerMethod('set:render:time');\r\n\t},\r\n\tgetNow: function() {\r\n\t\treturn new Date().getTime()\r\n\t},\r\n\tonSetRenderTime: function() {\r\n\t\tthis.lastRenderTime = this.getNow();\r\n\t},\r\n\tcheckRender: function() {\r\n\t\tvar delta = this.getNow() - this.lastRenderTime;\r\n\t\tif (delta > 100) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\tonBeforeRender: function() {\r\n\t\tthis.triggerMethod('set:render:time')\r\n\t}\r\n})\r\nvar RootView = Marionette.View.extend({\r\n\ttemplate: '#t-root',\r\n\tclassName: 'root',\r\n\tregions: new RegionSetter('navibar','statusbar','content','footer'),\r\n\tinitialize: function(options) {\r\n\t\tthis.model = options.model;\r\n\t},\r\n\tonRender: function () {\r\n\t\tthis.getRegion('statusbar').show(new AcceleratorDebug({\r\n\t\t\tmodel: this.model\r\n\t\t}));\r\n\t\tthis.getRegion('navibar').show(new Navibar.View());\r\n\t}\r\n});\r\n\r\n\r\n$(document).ready(function () {\r\n\tapp.start();\r\n\r\n});\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":"/source/"}