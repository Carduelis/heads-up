{"version":3,"sources":["js/setup.js"],"names":["Data","View","EntryPoint","Marionette","extend","initialize","dataset","localStorage","localRead","type","name","disabledState","value","measure","disableState","options","id","this","view","Settings","Setting","getRegion","Model","Backbone","description","Collection","SettingItem","template","onInput","events","input .form-control","tagName","set","e","currentTarget","CollectionView","collection","console","log","childView","bindEvents","collectionEvents","app","model","accelerometerModelEvents","change","localSave","onGravityChange","x","get","y","models","transform","Math","abs","$el","css","window","Setup","Entry"],"mappings":"CAAC,WACD,GAAAA,MAAAC,IAGAC,YAAAA,WAAaC,OAAAC,QACZC,WAAAA,WACC,GAAAC,KAECA,GADDC,aAAIA,QAAA,YACHD,UAAUE,cAKRC,MAAM,oBACNC,KAAM,SACNC,KAAAA,QACAC,cAAO,WANCA,MAOP,IAEDH,MAAM,iBACNG,KAAAA,SACAF,MAAM,EACNC,KAAAA,OACAE,cAAS,KAbDA,QAcP,QAEDC,MAAAA,YACAJ,aAAM,WACND,KAAM,WACNG,KAAAA,SACAG,MAAAA,EAEEC,UAFOA,GAIN,EACDA,KADC,gBAJMA,GAON,EACDA,KADC,qCAPMA,GAUN,EACDA,KADC,qBAVMA,GAAA,EApBXN,KAAA,cA0CDO,KAAAC,KAAA,GAAAjB,GAAAkB,UAhDFb,QAAAA,IAmDAN,IAAKoB,SAALC,UAAwBC,WAAMlB,KAAOa,KAAAC,SAIlCT,EAAAA,QAAMc,SAFAD,MAAAlB,QAGNoB,SAAAA,WACAT,OACAF,MAAAA,sBACAF,KAAAA,OACAC,YAAO,KAPDG,QAAP,KASAF,QAAA,KAXFF,cAAA,WAaAX,MAAKmB,SAALnB,EAAKmB,SAAWI,SAASE,WAAWrB,QAKpCH,MAAKyB,EAAAA,UAIHzB,EAAAyB,YAAAvB,WAAuBF,KAAAG,QADhBuB,SAHiC,kBAMzCC,UAAS,qCACRC,QACAC,sBAAA,WAEF7B,QAAKkB,SAAWhB,GACf4B,KAAAA,MAASC,IADuC,QAAAC,EAAAC,cAAAtB,UAIhDP,EAAAA,SAAYF,WAAAgC,eAAA/B,QACX2B,QAAKK,KACLC,UAAQC,aACRC,UAAKC,EAAAA,YACLnC,WAR+C,SAAAU,GAShD0B,KAAAA,WAAkB,GAAAzC,GAAAmB,SAAAJ,EAAAT,SACjB+B,QAAAC,IAAWrB,KAAAmB,YADMnB,KAT8BuB,WAAAE,IAAAC,MAAA1B,KAAA2B,2BAa/CH,kBADyBI,OAZsB,iBAgB/CR,0BACAS,OAAU,mBAEXC,cAAAA,WACCC,QAAIL,IAAMM,SACVC,UAAIP,WAAU1B,KAAWiC,WAAzBC,SAECJ,gBAAa,SAAAJ,GACZS,EAAW,EAAXA,EAAAA,IAAW,WAAAJ,EAAA,EADCE,EAAb,GAAAP,EAAAM,IAAA,WAAAC,EAAA,EAKAG,KAAAC,IAAAN,GAAA,GAAA,GAAAK,KAAAC,IAAAJ,GAAA,MACDjC,KAAAsC,IAAAC,KALEJ,UAAW,eAAeJ,EAAE,OAAOE,EAAE,aASzCO,OAAOC,OACNzD,KAAMA,EACND,KAAMA,EACN2D,MAAOzD","file":"setup.js","sourcesContent":["(function(){\r\nvar Data = {}, View = {};\r\n\r\n\r\nEntryPoint = Marionette.Object.extend({\r\n\tinitialize: function() {\r\n\t\tvar dataset = [];\r\n\t\tif (localStorage.getItem('settings')) {\r\n\t\t\tdataset = localRead('settings');\r\n\t\t} else {\r\n\t\t\tdataset = [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'Количество команд',\r\n\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\tname: 'teams',\r\n\t\t\t\t\tdisabledState: 'disabled',\r\n\t\t\t\t\tvalue: 2\r\n\t\t\t\t},{\r\n\t\t\t\t\ttitle: 'Время на раунд',\r\n\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\tvalue: 4,\r\n\t\t\t\t\tname: 'time',\r\n\t\t\t\t\tdisabledState: null,\r\n\t\t\t\t\tmeasure: 'мин'\r\n\t\t\t\t},{\r\n\t\t\t\t\ttitle: 'Категория',\r\n\t\t\t\t\tdisableState: 'disabled',\r\n\t\t\t\t\tname: 'category',\r\n\t\t\t\t\ttype: 'select',\r\n\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\toptions: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\t\tname: 'Общие слова'\r\n\t\t\t\t\t\t},{\r\n\t\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\t\tname: 'Музыкальные группы и исполнители'\r\n\t\t\t\t\t\t},{\r\n\t\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\t\tname: 'Продукты питания'\r\n\t\t\t\t\t\t},{\r\n\t\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\t\tname: 'Гаджеты'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t\tthis.view = new View.Settings({\r\n\t\t\tdataset: dataset\r\n\t\t});\r\n\t\tapp.rootView.getRegion('content').show(this.view);\r\n\t},\r\n});\r\n\r\nData.Setting = Backbone.Model.extend({\r\n\tdefaults: function() {\r\n\t\treturn {\r\n\t\t\ttitle: 'Заголовок настройки',\r\n\t\t\ttype: 'text',\r\n\t\t\tdescription: null,\r\n\t\t\toptions: null,\r\n\t\t\tmeasure: null,\r\n\t\t\tdisabledState: 'disabled',\r\n\t\t\tvalue: null,\r\n\t\t}\r\n\t}\r\n});\r\nData.Settings = Backbone.Collection.extend({\r\n\tmodel: Data.Setting,\r\n\r\n});\r\n\r\nView.SettingItem = Marionette.View.extend({\r\n\ttemplate: '#t-setting-item',\r\n\tclassName: 'list-group-item list-settings-item',\r\n\tevents: {\r\n\t\t'input .form-control': 'onInput'\r\n\t},\r\n\tonInput: function(e) {\r\n\t\tthis.model.set('value',e.currentTarget.value);\r\n\t}\r\n});\r\nView.Settings = Marionette.CollectionView.extend({\r\n\ttagName: 'ul',\r\n\tclassName: 'list-group',\r\n\tchildView: View.SettingItem,\r\n\tinitialize: function (options) {\r\n\t\tthis.collection = new Data.Settings(options.dataset);\r\n\t\tconsole.log(this.collection);\r\n\t\tthis.bindEvents(app.model,this.accelerometerModelEvents);\r\n\t},\r\n\tcollectionEvents: {\r\n\t\t'change' : 'onModelChange'\r\n\t},\r\n\taccelerometerModelEvents: {\r\n\t\t'change' : 'onGravityChange'\r\n\t},\r\n\tonModelChange: function() {\r\n\t\tconsole.log('saved')\r\n\t\tlocalSave('settings',this.collection.models);\r\n\t},\r\n\tonGravityChange: function(model) {\r\n\t\tx = model.get('gravity').x*9/2;\r\n\t\ty = model.get('gravity').y*16/2;\r\n\t\tif (Math.abs(x) > 10/9 && Math.abs(y) > 10/16) {\r\n\t\t\tthis.$el.css({\r\n\t\t\t\ttransform: 'translate3d('+x+'px, '+y+'px,0)',\r\n\t\t\t\t// transform: 'translate3d('+x+'px, '+y+'px,0) rotateX('+y/5+'deg) rotateY('+x/5+'deg)',\r\n\t\t\t\t// transform: 'rotateX('+y+'deg) rotateY('+x+'deg) rotateZ('+x+'deg)',\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\nwindow.Setup = {\r\n\tView: View,\r\n\tData: Data,\r\n\tEntry: EntryPoint\r\n}\r\n\r\n}());"]}