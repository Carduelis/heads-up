{"version":3,"sources":["js/sound.js"],"names":["playSound","id","_","find","localRead","name","value","sound","$","get","pause","currentTime","play","each","el","Model","Backbone","extend","defaults","title","version","description","getName","this","Collection","model","Toggle","Marionette","View","template","className","initialize","lsChannel","on","render","onDestroy","off","onBeforeRender","soundDataset","Setup","Data","Setting","triggers","click","onToggleSound","set","settings","soundIndex","findIndex","attributes","localSave","trigger","window","Sound","choosed","ToggleView"],"mappings":"AAAA,QAASA,WAAUC,GAClB,GAAIC,EAAEC,KAAKC,UAAU,aAAaC,KAAM,UAAUC,MAAM,CACvD,GAAIC,GAAQC,EAAE,UAAUP,GAAIQ,IAAI,EAChCF,GAAMG,QACNH,EAAMI,YAAc,EACpBJ,EAAMK,WAENV,GAAEW,KAAKL,EAAE,SAAU,SAASM,GAC3BA,EAAGJ,WAKL,WAEDK,MAAQC,SAASD,MAAME,QACtBC,UACCC,MAAO,qBACPd,KAAM,UACNe,QAAS,EACTC,YAAa,4BAEdC,QAAS,WACR,MAAOC,MAAKd,IAAI,QAAQ,KAAKc,KAAKd,IAAI,cAGxCe,WAAaR,SAASQ,WAAWP,QAChCQ,MAAOV,QAGRW,OAASC,WAAWC,KAAKX,QACxBY,SAAU,mBACVC,UAAY,gBAEZC,WAAY,WACXC,UAAUC,GAAG,qBAAqBV,KAAKW,SAExCC,UAAW,WACVH,UAAUI,IAAI,uBAEfC,eAAgB,WACf,GAAIC,GAAepC,EAAEC,KAAKC,UAAU,aAAaC,KAAM,SACvDkB,MAAKE,MAAQ,GAAIc,OAAMC,KAAKC,QAAQH,IAErCI,UACCC,MAAU,gBAEXC,cAAe,WACdrB,KAAKE,MAAMoB,IAAI,SAAUtB,KAAKE,MAAMhB,IAAI,SACxC,IAAIqC,GAAW1C,UAAU,YACrB2C,EAAa7C,EAAE8C,UAAUF,GAAUzC,KAAM,SAC7CyC,GAASC,GAAcxB,KAAKE,MAAMwB,WAClCC,UAAU,WAAWJ,GACrBd,UAAUmB,QAAQ,qBAAqBL,GACvCvB,KAAKW,YAOPkB,OAAOC,OACNC,QAAS,GAAIvC,OACbA,MAAOA,MACPS,WAAYA,WACZ+B,WAAY7B","file":"js/sound.js","sourcesContent":["function playSound(id) {\r\n\tif (_.find(localRead('settings'),{name: 'sound'}).value){\r\n\t\tvar sound = $('#audio-'+id).get(0);\r\n\t\tsound.pause();\r\n\t\tsound.currentTime = 0;\r\n\t\tsound.play();\r\n\t} else {\r\n\t\t_.each($('audio'), function(el) {\r\n\t\t\tel.pause();\r\n\t\t})\r\n\t}\r\n};\r\n\r\n(function(){\r\n\r\nModel = Backbone.Model.extend({\r\n\tdefaults: {\r\n\t\ttitle: 'Default dictionary',\r\n\t\tname: 'default',\r\n\t\tversion: 0,\r\n\t\tdescription: 'Contains different words'\r\n\t},\r\n\tgetName: function() {\r\n\t\treturn this.get('name')+'_v'+this.get('version');\r\n\t}\r\n});\r\nCollection = Backbone.Collection.extend({\r\n\tmodel: Model\r\n});\r\n\r\nToggle = Marionette.View.extend({\r\n\ttemplate: '#t-sound-toggler',\r\n\tclassName : 'sound-toggler',\r\n\r\n\tinitialize: function() {\r\n\t\tlsChannel.on('setup:save:success',this.render);\r\n\t},\r\n\tonDestroy: function() {\r\n\t\tlsChannel.off('setup:save:success');\r\n\t},\r\n\tonBeforeRender: function() {\r\n\t\tvar soundDataset = _.find(localRead('settings'),{name: 'sound'});\r\n\t\tthis.model = new Setup.Data.Setting(soundDataset);\r\n\t},\r\n\ttriggers: {\r\n\t\t'click' : 'toggle:sound'\r\n\t},\r\n\tonToggleSound: function() {\r\n\t\tthis.model.set('value', !this.model.get('value'));\r\n\t\tvar settings = localRead('settings');\r\n\t\tvar soundIndex = _.findIndex(settings,{name: 'sound'});\r\n\t\tsettings[soundIndex] = this.model.attributes;\r\n\t\tlocalSave('settings',settings);\r\n\t\tlsChannel.trigger('sound:save:success',settings);\r\n\t\tthis.render();\r\n\t}\r\n\r\n})\r\n\r\n\r\n\r\nwindow.Sound = {\r\n\tchoosed: new Model(),\r\n\tModel: Model,\r\n\tCollection: Collection,\r\n\tToggleView: Toggle\r\n\t// Data: Data,\r\n\t// Entry: EntryPoint,\r\n}\r\n\r\n}());"],"sourceRoot":"/source/"}