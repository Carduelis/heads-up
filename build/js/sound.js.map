{"version":3,"sources":["js/sound.js"],"names":["playSound","id","_","find","localRead","name","value","sound","$","get","pause","currentTime","play","each","el","Model","Backbone","extend","defaults","title","version","description","getName","this","Collection","model","Toggle","Marionette","template","className","initialize","lsChannel","render","onDestroy","onBeforeRender","soundDataset","Setup","Setting","triggers","click","onToggleSound","set","settings","soundIndex","attributes","localSave","ToggleView"],"mappings":"AAAA,QAASA,WAAUC,GAClB,GAAIC,EAAEC,KAAKC,UAAU,aAAYC,KAACA,UAADC,MAAiBA,CACjD,GAAIC,GAAQC,EAAE,UAAAP,GAAFQ,IAAgBA,EAC5BF,GAAMG,QACNH,EAAMI,YAAc,EACpBJ,EAAMK,WAENV,GAAEW,KAAKL,EAAE,SAAU,SAAAM,GAClBA,EAAGJ,WAKL,WAEDK,MAAAA,SAAQC,MAAAC,QACPC,UACCC,MAAAA,qBACAd,KAAAA,UACAe,QAAAA,EACAC,YAAAA,4BAEDC,QAAAA,WACC,MAAAC,MAAOd,IAAA,QAAA,KAAiBc,KAAKd,IAAA,cAG/Be,WAAAA,SAAaR,WAAAC,QACZQ,MAAAA,QAGDC,OAAAA,WAASC,KAAAV,QACRW,SAAAA,mBACAC,UAAY,gBAEZC,WAAAA,WACCC,UAAAA,GAAA,qBAAAR,KAAkCS,SAEnCC,UAAAA,WACCF,UAAAA,IAAA,uBAEDG,eAAAA,WACC,GAAAC,GAAIA,EAAejC,KAAAE,UAAOA,aAAPC,KAA8BA,SACjDkB,MAAAE,MAAA,GAAaW,OAAIA,KAAAC,QAAJF,IAEdG,UACCC,MAAU,gBAEXC,cAAAA,WACCjB,KAAAE,MAAAgB,IAAA,SAAwBlB,KAACE,MAAAhB,IAAA,SACzB,IAAAiC,GAAIA,UAAWtC,YACfuC,EAAIA,EAAazC,UAAAwC,GAAArC,KAAsBA,SACvCqC,GAAAA,GAAAnB,KAAuBE,MAAAmB,WACvBC,UAAAA,WAAAH,GACAX,UAAAA,QAAA,qBAAAW,GACAnB,KAAAS,YASDjB,OAAAA,OACAS,QAAAA,GAAYA,OACZsB,MAAAA,MACAtB,WAAAA,WACAsB,WAAApB","file":"sound.js","sourcesContent":["function playSound(id) {\r\n\tif (_.find(localRead('settings'),{name: 'sound'}).value){\r\n\t\tvar sound = $('#audio-'+id).get(0);\r\n\t\tsound.pause();\r\n\t\tsound.currentTime = 0;\r\n\t\tsound.play();\r\n\t} else {\r\n\t\t_.each($('audio'), function(el) {\r\n\t\t\tel.pause();\r\n\t\t})\r\n\t}\r\n};\r\n\r\n(function(){\r\n\r\nModel = Backbone.Model.extend({\r\n\tdefaults: {\r\n\t\ttitle: 'Default dictionary',\r\n\t\tname: 'default',\r\n\t\tversion: 0,\r\n\t\tdescription: 'Contains different words'\r\n\t},\r\n\tgetName: function() {\r\n\t\treturn this.get('name')+'_v'+this.get('version');\r\n\t}\r\n});\r\nCollection = Backbone.Collection.extend({\r\n\tmodel: Model\r\n});\r\n\r\nToggle = Marionette.View.extend({\r\n\ttemplate: '#t-sound-toggler',\r\n\tclassName : 'sound-toggler',\r\n\r\n\tinitialize: function() {\r\n\t\tlsChannel.on('setup:save:success',this.render);\r\n\t},\r\n\tonDestroy: function() {\r\n\t\tlsChannel.off('setup:save:success');\r\n\t},\r\n\tonBeforeRender: function() {\r\n\t\tvar soundDataset = _.find(localRead('settings'),{name: 'sound'});\r\n\t\tthis.model = new Setup.Data.Setting(soundDataset);\r\n\t},\r\n\ttriggers: {\r\n\t\t'click' : 'toggle:sound'\r\n\t},\r\n\tonToggleSound: function() {\r\n\t\tthis.model.set('value', !this.model.get('value'));\r\n\t\tvar settings = localRead('settings');\r\n\t\tvar soundIndex = _.findIndex(settings,{name: 'sound'});\r\n\t\tsettings[soundIndex] = this.model.attributes;\r\n\t\tlocalSave('settings',settings);\r\n\t\tlsChannel.trigger('sound:save:success',settings);\r\n\t\tthis.render();\r\n\t}\r\n\r\n})\r\n\r\n\r\n\r\nwindow.Sound = {\r\n\tchoosed: new Model(),\r\n\tModel: Model,\r\n\tCollection: Collection,\r\n\tToggleView: Toggle\r\n\t// Data: Data,\r\n\t// Entry: EntryPoint,\r\n}\r\n\r\n}());"]}