{"version":3,"sources":["js/game.js"],"names":["Data","View","EntryPoint","Marionette","Object","extend","initialize","this","triggerMethod","onGetDictionary","_this","localStorage","getItem","$","get","success","dictionary","onDictionaryStored","getOption","length","pickedWords","getRandomWord","i","_","random","theWord","push","view","Game","Main","dataset","word","app","rootView","getRegion","show","bindEvents","childviewEvents","pass","correct","next","onPassWord","model","set","history","onCorrectWord","onNext","e","a","b","Backbone","Model","defaults","guessed","undefined","History","Collection","template","className","options","_this2","delay","accelerometerModelEvents","templateContext","base","width","document","k","delta","size","change","triggers","click [data-action=\"correct\"]","click [data-action=\"pass\"]","onGravityChange","tilt","z","accelerateTilt","Math","abs","unbindEvents","onDisableButtons","$el","find","attr","onPass","addClass","onStartSwipeAnimation","_this3","console","log","onCorrect","window","Entry"],"mappings":"CAAC,WACD,GAAIA,MAAWC,IAGfC,YAAaC,WAAWC,OAAOC,QAC9BC,WAAY,WACXC,KAAKC,cAAc,mBAEpBC,gBAAiB,WAAW,GAAAC,GAAAH,IACxBI,cAAaC,QAAQ,cAEvBL,KAAKC,cAAc,qBAEnBK,EAAEC,IAAI,0BAA0BC,QAAQ,SAAAC,GACvCN,EAAKM,WAAaA,EAClBN,EAAKF,cAAc,oBAAqBQ,MAK3CC,mBAAoB,SAASD,GAC5B,GAAIA,GAAaT,KAAKW,UAAU,cAC5BC,EAASH,EAAWG,OACpBC,IACJC,eAAgB,WACf,GAAIC,GAAIC,EAAEC,OAAO,EAAEL,EAAO,EAC1B,OAAOH,GAAWM,GAEnB,IAAIG,GAAUJ,eACdD,GAAYM,KAAKD,GAEjBlB,KAAKoB,KAAO,GAAIC,MAAK3B,KAAK4B,MACzBC,SACCC,KAAMN,KAGRO,IAAIC,SAASC,UAAU,WAAWC,KAAK5B,KAAKoB,MAC5CpB,KAAK6B,WAAW7B,KAAKoB,KAAKpB,KAAK8B,kBAEhCA,iBACCC,KAAW,aACXC,QAAY,gBACZC,KAAU,UAEXC,WAAY,SAASd,GAEpBA,EAAKe,MAAMC,IAAI,WAAU,GACzBX,IAAIY,QAAQlB,KAAKC,EAAKe,QAEvBG,cAAe,SAASlB,GACvBA,EAAKe,MAAMC,IAAI,WAAU,GACzBX,IAAIY,QAAQlB,KAAKC,EAAKe,QAEvBI,OAAQ,SAAUC,EAAEC,EAAEC,GACrB1C,KAAKC,cAAc,wBAIrBR,EAAK6B,KAAOqB,SAASC,MAAM9C,QAC1B+C,SAAU,WACT,OACCrB,KAAM,eACNsB,QAASC,WAIZtD,EAAKuD,QAAUL,SAASM,WAAWnD,QAClCqC,MAAO1C,EAAK6B,KACZvB,WAAY,eAIb0B,IAAIY,QAAU,GAAI5C,GAAKuD,QACvBtD,EAAK4B,KAAO1B,WAAWF,KAAKI,QAC3BoD,SAAU,UACVC,UAAW,eACXpD,WAAY,SAASqD,GAAS,GAAAC,GAAArD,IAC7BA,MAAKmC,MAAQ,GAAI1C,GAAK6B,KAAK8B,EAAQ7B,SACnCP,EAAEsC,MAAM,WACPD,EAAKxB,WAAWJ,IAAIU,MAAMkB,EAAKE,2BAC9B,MAEHC,gBAAiB,WAChB,GAAI5C,GAASZ,KAAKmC,MAAM5B,IAAI,QAAQK,OAChC6C,EAAO,EACPC,EAAQpD,EAAEqD,UAAUD,QACpBE,EAAU,GAANF,EAAU9C,EAAO,GACrBiD,EAAY,EAAJD,EAAQA,EAAI,CACxB,QACCE,KAAML,EAAKI,IAGbN,0BACCQ,OAAU,mBAEXC,UACCC,gCAAiC,UACjCC,6BAA8B,QAE/BC,gBAAiB,SAAShC,GACzB,GAAIiC,GAAOjC,EAAM5B,IAAI,WAAW8D,EAC5BC,EAAiBnC,EAAM5B,IAAI,IAC3BgE,MAAKC,IAAIJ,GAAQ,GAEVG,KAAKC,IAAIJ,GAAQ,EAGjB,GAAPA,GAAaE,EAAiB,KACjCtE,KAAKyE,aAAahD,IAAIU,MAAMnC,KAAKuD,0BACjCvD,KAAKC,cAAc,UAAUD,OAE1BoE,EAAO,IAAuB,GAAlBE,IACftE,KAAKyE,aAAahD,IAAIU,MAAMnC,KAAKuD,0BACjCvD,KAAKC,cAAc,OAAOD,QAG5B0E,iBAAkB,WACjB1E,KAAK2E,IAAIC,KAAK,iBAAiBC,KAAK,WAAW,aAEhDC,OAAQ,WACP9E,KAAKC,cAAc,mBACnBD,KAAK2E,IAAII,SAAS,QAClB/E,KAAKC,cAAc,0BAEpB+E,sBAAuB,WAAY,GAAAC,GAAAjF,IAClCgB,GAAEsC,MAAM,WACP2B,EAAKN,IAAII,SAAS,UAClB/D,EAAEsC,MAAM,WACP4B,QAAQC,IAAI,eACZF,EAAKhF,cAAc,SAClB,MACD,MAEHmF,UAAW,WACVpF,KAAKC,cAAc,mBACnBD,KAAK2E,IAAII,SAAS,WAClB/E,KAAKC,cAAc,4BAIrBoF,OAAOhE,MACN3B,KAAMA,EACND,KAAMA,EACN6F,MAAO3F","file":"js/game.js","sourcesContent":["(function(){\r\nvar Data = {}, View = {};\r\n\r\n\r\nEntryPoint = Marionette.Object.extend({\r\n\tinitialize: function() {\r\n\t\tthis.triggerMethod('get:dictionary');\r\n\t},\r\n\tonGetDictionary: function() {\r\n\t\tif(localStorage.getItem('dictionary')) {\r\n\r\n\t\t\tthis.triggerMethod('dictionary:stored')\r\n\t\t} else {\r\n\t\t\t$.get('assets/dictionary.json').success(dictionary => {\r\n\t\t\t\tthis.dictionary = dictionary;\r\n\t\t\t\tthis.triggerMethod('dictionary:stored', dictionary)\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t},\r\n\tonDictionaryStored: function(dictionary) {\r\n\t\tvar dictionary = this.getOption('dictionary');\r\n\t\tvar length = dictionary.length;\r\n\t\tvar pickedWords = [];\r\n\t\tgetRandomWord = function() {\r\n\t\t\tvar i = _.random(0,length-1);\r\n\t\t\treturn dictionary[i]\r\n\t\t}\r\n\t\tvar theWord = getRandomWord();\r\n\t\tpickedWords.push(theWord);\r\n\r\n\t\tthis.view = new Game.View.Main({\r\n\t\t\tdataset: {\r\n\t\t\t\tword: theWord\r\n\t\t\t}\r\n\t\t})\r\n\t\tapp.rootView.getRegion('content').show(this.view);\r\n\t\tthis.bindEvents(this.view,this.childviewEvents);\r\n\t},\r\n\tchildviewEvents: {\r\n\t\t'pass' \t\t:\t'onPassWord',\r\n\t\t'correct'\t:\t'onCorrectWord',\r\n\t\t'next'\t\t:\t'onNext' \t\r\n\t},\r\n\tonPassWord: function(view) {\r\n\r\n\t\tview.model.set('guessed',false);\r\n\t\tapp.history.push(view.model);\r\n\t},\r\n\tonCorrectWord: function(view) {\r\n\t\tview.model.set('guessed',true);\r\n\t\tapp.history.push(view.model);\r\n\t},\r\n\tonNext: function (e,a,b) {\r\n\t\tthis.triggerMethod('dictionary:stored');\r\n\t}\r\n})\r\n\r\nData.Main = Backbone.Model.extend({\r\n\tdefaults: function() {\r\n\t\treturn {\r\n\t\t\tword: 'Default Word',\r\n\t\t\tguessed: undefined\r\n\t\t}\r\n\t}\r\n});\r\nData.History = Backbone.Collection.extend({\r\n\tmodel: Data.Main,\r\n\tinitialize: function() {\r\n\r\n\t}\r\n});\r\napp.history = new Data.History();\r\nView.Main = Marionette.View.extend({\r\n\ttemplate: '#t-main',\r\n\tclassName: 'game-content',\r\n\tinitialize: function(options) {\r\n\t\tthis.model = new Data.Main(options.dataset);\r\n\t\t_.delay(()=>{\r\n\t\t\tthis.bindEvents(app.model,this.accelerometerModelEvents);\r\n\t\t},500);\r\n\t},\r\n\ttemplateContext: function() {\r\n\t\tvar length = this.model.get('word').length;\r\n\t\tvar base = 1;\r\n\t\tvar width = $(document).width();\r\n\t\tvar k = width*0.8/length/16\r\n\t\tvar delta = k < 4 ? k : 4; \r\n\t\treturn {\r\n\t\t\tsize: base+delta\r\n\t\t}\r\n\t},\r\n\taccelerometerModelEvents: {\r\n\t\t'change': 'onGravityChange'\r\n\t},\r\n\ttriggers: {\r\n\t\t'click [data-action=\"correct\"]': 'correct',\r\n\t\t'click [data-action=\"pass\"]': 'pass',\r\n\t},\r\n\tonGravityChange: function(model) {\r\n\t\tvar tilt = model.get('gravity').z;\r\n\t\tvar accelerateTilt = model.get('z');\r\n\t\tif (Math.abs(tilt) < 4) {\r\n\t\t\t// ok-state\r\n\t\t} else if (Math.abs(tilt) < 6) {\r\n\t\t\t// warning-state\r\n\t\t}\r\n\t\tif (tilt < -4 && accelerateTilt > 0.8) {\r\n\t\t\tthis.unbindEvents(app.model,this.accelerometerModelEvents);\r\n\t\t\tthis.triggerMethod('correct',this);\r\n\t\t}\r\n\t\tif (tilt > 6 && accelerateTilt < -0.8) {\r\n\t\t\tthis.unbindEvents(app.model,this.accelerometerModelEvents);\r\n\t\t\tthis.triggerMethod('pass',this);\r\n\t\t}\r\n\t},\r\n\tonDisableButtons: function () {\r\n\t\tthis.$el.find('[data-action]').attr('disabled','disabled');\t\r\n\t},\r\n\tonPass: function() {\r\n\t\tthis.triggerMethod('disable:buttons');\r\n\t\tthis.$el.addClass('pass');\r\n\t\tthis.triggerMethod('start:swipe:animation');\r\n\t},\r\n\tonStartSwipeAnimation: function () {\r\n\t\t_.delay(()=>{\r\n\t\t\tthis.$el.addClass('swiped');\r\n\t\t\t_.delay(()=>{\r\n\t\t\t\tconsole.log('before:next')\r\n\t\t\t\tthis.triggerMethod('next');\r\n\t\t\t},300);\r\n\t\t},300);\r\n\t},\r\n\tonCorrect: function() {\r\n\t\tthis.triggerMethod('disable:buttons');\r\n\t\tthis.$el.addClass('correct');\r\n\t\tthis.triggerMethod('start:swipe:animation');\r\n\t},\r\n})\r\n\r\nwindow.Game = {\r\n\tView: View,\r\n\tData: Data,\r\n\tEntry: EntryPoint\r\n}\r\n\r\n}());"],"sourceRoot":"/source/"}