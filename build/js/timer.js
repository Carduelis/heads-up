!function(){var e={},t={},i=Marionette.Object.extend({model:new Backbone.Model,initialize:function(e){var t=localRead("settings"),i=_.find(t,{title:"Время на раунд"});i?this.model.set("time",60*i.value*1e3):this.model.set("time",6e4),this.triggerMethod("start")},onStart:function(){this.model.set("startTime",this.model.get("time")),this.pause=!1,this.triggerMethod("tick")},onAfterTick:function(){},onStop:function(){this.model.set("time",this.model.get("startTime")),this.pause=!0;this.model.get("time")},onEnd:function(){},onPause:function(){this.pause=!0},onPlay:function(){this.pause=!1},onTick:function(e){var t=this;this.triggerMethod("before:tick");var e=e||1e3;this.model.set("time",this.model.get("time")-e),this.model.get("time")>0?this.pause||_.delay(function(){t.triggerMethod("tick",e)},e):this.triggerMethod("end"),this.triggerMethod("after:tick")}}),n=Marionette.Object.extend({initialize:function(){this.timer=new i({tick:1e3}),this.view=new t.Timer({model:this.timer.model}),app.rootView.getRegion("footer").show(this.view)}});t.Timer=Marionette.View.extend({template:"#t-timer",className:"timer",initialize:function(e){},modelEvents:{change:"render"},templateContext:function(){var e=this.model.get("time"),t=Math.floor(e/60/1e3),i=Math.floor((e-60*t*1e3)/1e3);return 10>t&&(t="0"+t),10>i&&(i="0"+i),{minutes:t,seconds:i}},onBeforeRender:function(){var e=this;0==this.model.get("time")&&(_.delay(function(){e.$el.addClass("time-is-up")},100),_.delay(function(){e.$el.addClass("bound-out")},1100),_.delay(function(){app.router.navigate("results",{trigger:!0})},1500))},onRender:function(){console.log("render")}}),window.Timer={View:t,Data:e,Entry:n}}();
//# sourceMappingURL=timer.js.map
